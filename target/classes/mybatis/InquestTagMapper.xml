<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ecdata.ec803.dao.InquestTagDao">

    <insert id="addTag" parameterType="com.ecdata.ec803.domain.InquestTag">
        insert into inquest_tag
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="tagStartTime != null">
                tag_start_time,
            </if>
            <if test="tagEndTime != null">
                tag_end_time,
            </if>
            <if test="beginTime != null">
                begin_time,
            </if>
            <if test="status != null  and status != ''">
                status,
            </if>
            <if test="createTime != null">
                create_time,
            </if>
            <if test="inquestId != null  and inquestId != ''">
                inquest_id,
            </if>
            <if test="creator != null   and creator != ''">
                creator,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="tagStartTime != null">
                #{tagStartTime},
            </if>
            <if test="tagEndTime != null">
                #{tagEndTime},
            </if>
            <if test="beginTime != null">
                #{beginTime},
            </if>
            <if test="status != null and status != ''">
                #{status},
            </if>
            <if test="createTime != null">
                #{createTime},
            </if>
            <if test="inquestId != null and inquestId != ''">
                #{inquestId},
            </if>
            <if test="creator != null   and creator != ''">
                #{creator},
            </if>
        </trim>
    </insert>


    <select id="queryTag" resultType="hashmap" parameterType="com.ecdata.ec803.domain.InquestTag">
        select t1.begin_time "beginTime" ,CONCAT('{"tagStartTime":"',concat(unix_timestamp(t1.tag_start_time),'000'),'","tagEndTime":"',concat(unix_timestamp(t1.tag_end_time),'000'),'"}') map
        from inquest_tag t1
        where t1.status = '1'
        and inquest_id = #{inquestId}
    </select>


</mapper>
